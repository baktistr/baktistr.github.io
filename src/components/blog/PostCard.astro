---
import type { CollectionEntry } from 'astro:content';
import PostMeta from './PostMeta.astro';

interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const words = post.body?.split(/\s+/).length ?? 0;
const readingTime = Math.max(1, Math.ceil(words / 200));
---

<article class="group p-6 rounded-lg bg-slate-900/50 light:bg-white border border-slate-800 light:border-slate-200 hover:border-cyan-400/50 light:hover:border-cyan-600/50 transition-all hover:shadow-lg hover:shadow-cyan-400/5 light:hover:shadow-cyan-600/5">
  <a href={`/blog/${post.slug}`} class="block">
    <h2 class="text-xl font-bold text-slate-100 light:text-slate-900 group-hover:text-cyan-400 light:group-hover:text-cyan-600 transition-colors mb-2">
      {post.data.title}
    </h2>
    <p class="text-slate-400 light:text-slate-600 mb-4 line-clamp-2">{post.data.description}</p>
    <PostMeta
      date={post.data.pubDate}
      readingTime={readingTime}
      tags={post.data.tags}
    />
  </a>
</article>
